### [返回目录](0.目录.md)

## 3.1 JsWebView

**JsWebView.html**

html文件放于assets文件夹，内容如下：

```
<html>
<head>
</head>
	<body style="MARGIN: 0px;">
		<marquee id="mar" onmouseover="this.stop();" onmouseleave="this.start();" scrollAmount="6"
				scrollDelay="110" behavior="scroll" height="60px" onstart="on_marquee_start();">
			</marquee>	
	</body>
<script src="css/json_ex.js" type="text/javascript"></script>
<script language="javascript">

var JSON_decode = JSON.parseJSON;
var JSON_encode = JSON.stringify;
		
function on_marquee_start()
{
	marquee_stop();
	var pkt = {};
    pkt.cmd = "on_marquee_start";
    SendObjToKTV("msg_marquee", pkt);
}
function change_innerHtml(newcontent)
{
	document.getElementById("mar").innerHTML=newcontent;
}
function change_amount(newamount)
{
	document.getElementById("mar").scrollAmount=newamount;
}
function change_bkground(img)
{
	document.body.background=img;
}
function marquee_stop() 
{
	document.getElementById("mar").stop();
}
function marquee_start() 
{
	document.getElementById("mar").start();
}


function Notify(str)
{
	//HtmlSendMsgToC如果用带下划线的html_send_msg_to_c，则解析的时候会有htm文件的路径
	window.navigate("HtmlSendMsgToC:"+str);
}
function SendDataToKTV(type, data)
{
	var str = "type=" + type + "&" + data;
	Notify(str);
}
function SendObjToKTV(type, obj) 
{
	SendDataToKTV(type,JSON_encode(obj))
}
function SendMsgModule()
{
	var pkt = {};
	var msg = {};
	msg.cmd = "on_marquee_start";
	msg.x=100;
	msg.y=100;
    pkt.cmd = "on_marquee_start";
	pkt.msg = msg;
	pkt.x=99;
	pkt.y=99;
    SendObjToKTV("msg_marquee", pkt);
}
</script>
</html>
```

**布局文件**

```xml
<com.ag.ui.web.jsutil.JsWebView 
    android:id="@+id/jwv_html"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent" />
```



[github源码HTTPS地址](https://github.com/AgAndroidDemo/JsWebViewComJava.git)

[github源码SSH地址](git@github.com:AgAndroidDemo/JsWebViewComJava.git)

